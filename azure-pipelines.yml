trigger:
- master

jobs:
- job: Linux
  pool:
    vmImage: 'ubuntu-16.04'

  steps:
  - script: cd examples

  - task: CMake@1
    inputs:
      cmakeArgs: '$(Build.SourcesDirectory)'

  - script: cd build && make

- job: macOS
  pool:
    vmImage: 'macOS-10.14'

  steps:
  - script: cd examples

  - task: CMake@1
    inputs:
      cmakeArgs: '$(Build.SourcesDirectory)'

  - script: cd build && make

- job: Windows
  pool:
    vmImage: 'windows-2019'

  steps:
  - script: cd examples

  - task: CMake@1
    inputs:
      workingDirectory: 'build'
      cmakeArgs: '-A x64 -DCMAKE_HOST_SYSTEM_NAME=Windows $(Build.SourcesDirectory)'

  - task: MSBuild@1
    inputs:
      solution: 'build/*.sln'
      maximumCpuCount: true
      platform: 'x64'
